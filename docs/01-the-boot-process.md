# 系统启动流程

系统开机后，会将主板中的 BIOS 系统加载到内存中并执行。BIOS 会依次读取此系统上连接的每一个磁盘，并读取磁盘引导区的内容。如果引导区的内容满足约定的格式，则认为这个磁盘是一个系统盘，并执行引导区中的代码。

所谓引导区即磁盘上最开始的 512 个字节。

所谓约定格式即引导区的最后两个字节内容为 `0xAA55`。

所以我们只需要创建一个大小为 512 个字节的文件，并将最后两个字节的内容修改为 `0xAA55`。不过由于我们的目标处理器是 x86 架构的，此架构在处理多字节字符时使用的是小端（little-endian）表示法，所以我们应该把最后两个字节设置为 `0x55AA` 而不是 `0xAA55`。

一旦引导区满足约定的格式，引导区中的内容就会被当作汇编代码执行。前 500 个字节的内容应该是什么，执行这里代码会产生什么样的后果，我们目前并不知道。但是前 500 个字节的内容我们不能乱写，因为执行这些未知的指令可能会产生意想不到的后果。

在我们还没有确定在引导区代码中写什么程序逻辑前，我们先在引导区的代码中写入一个空的死循环，依次确定我们的 CPU 不会执行到其他指令。

```asm
loop:
    jmp loop
    
    times 510-($-$$) db 0
    db 0x55
    db 0xaa
```
